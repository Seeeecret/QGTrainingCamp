# 异常

## 1.0	异常继承体系

​	在异常继承体系中，最顶层的是Java.lang.Throwable类,它有两个子类Error和Exception，后者才是我们常说的异常。异常又分为RuntimeException运行时异常和其他异常，往往还有若干异常类继承自运行时异常类

## 1.1	异常种类介绍

#### 1.11	Error

​	Error可以译作错误，往往发生于系统层面，属于比较严重的错误。但不是开发人员需要处理的错误。

#### 1.12	Exception

​	译为"异常"，代表程序可能出现的问题。程序出现的问题通常会用Exception以及它的子类来封装。

#### 1.13	运行时异常

​	RuntimeException及其子类，继承自Exception。其在编译阶段不会出现异常提醒，是只在运行时出现的异常，如：数组索引越界异常。这类异常就是代码出错导致程序出现的问题。

#### 1.14	编译时异常

​	编译阶段就会出现异常提醒的异常，如日期解析异常。这类异常会提醒程序员去检查本地信息。

## 1.2	异常的作用

​	代码运行后报告异常时，要从输出异常信息的最底下一条往上看。

​	异常主要有两个作用:

	1. 用来查询bug的关键参考信息。
	1. 作为方法内部的一种特殊返回值，以便通知调用者底层的执行情况。

## 1.3	异常的处理

### 1.31	JVM虚拟机默认的处理方式

1. 把异常的名称，异常原因及异常出现的位置等信息以红色字体输出在控制台
1. 程序停止运行，下面的代码不会再执行

### 1.32	自己处理(try...catch捕获异常最后还有finally)

#### 1.321	格式

```java
try{
	//可能出现异常的代码;
}catch(异常类名 变量名){
	//异常的处理代码;
}finally{
    //被finally控制的代码块一定会执行，除非虚拟机退出，建议放释放资源(流)的代码 
}
```

#### 1.322	详细

- 当try后的语句块抛出了一个异常对象，它就会与catch()括号中的异常类名匹配，如果匹配成功，那么这个异常就被捕获了，"变量名"就会引用这个异常对象，并运行catch{}的代码。如果匹配失败，则catch{}内的代码不会被执行。可以存在多个catch{}语句块，但最后只有一个会被执行，且作为超类的异常类要放到最底部的catch{}
- 如果try{}中有多句可能抛出异常的代码，那么最后都只有一条异常会抛出，这条异常抛出后立即与catch中的异常类型进行匹配，之后要么被catch()捕捉，要么被JVM虚拟机以默认形式处理(即停止程序)
- 若catch{}中要捕获的异常类型有多种，但处理方式相同，在JDK7后可以这么编写代码:

```java
try{
	//可能出现异常的代码;
}catch(NullPointerException | ArrayIndexOutofBoundsException e){
	//异常的处理代码;
}
```

### 1.33	抛出处理

#### 1.333	写在方法定义出的throws

​	**throws**关键字写在**方法定义处**，表示声明一个异常。它告诉调用者，使用此方法可能会有哪些异常:

```java
public void 方法()throws 异常类名1,异常类名2...{
//...
}
```

​	对于可能出现的编译时异常，**必须**用**throws**写在方法调用处。而运行时异常可以省略不写

#### 1.336	写在方法内的throw

​	**throw**关键字写在方法内，运行到此语句时会直接结束方法，方法后面的语句**不会**再执行。并手动抛出其后的异常对象，交给方法的调用者:

```java
public void 方法(){
	//代码
	throw new NullPointerException
}
```

##  1.4	自定义异常类

​	自定义异常类其实就是"为了一碟醋包的饺子"。自定义异常类的主要作用是为了能给方法的调用者以直观的报错信息。而这份信息的主体存储在自定义异常类的类名中，随异常的抛出而被传递给调用者。所以设计原则就是:"见名知意"。

### 1.41	如何编写

	1. 定义一个类，其名字要见名知意。名字最后必须以"Exception"为结尾
	1. 定义此异常类的继承关系
	1. 编写空参构造和带参构造

​	下例:

```java
public class NameFormatException extends RuntimeException{
	public NameFormatException(){
	}
	public NameFormatException(String message){
		super(message);
	}
}
```

